<template name="portfolio">
  <div class="portfolio">
    <h2>Portfolio</h2>
    <label for="show-closed">
      Show Closed Positions
      <input id="show-closed" type="checkbox" checked="{{showClosed}}" />
    </label>
    {{#if currentHoldings}}
    <table>
      <thead>
        <tr>
          <th>Symbol</th>
          <th>Price</th>
          <th>Change</th>
          <th>Shares</th>
          <th>Cost Basis</th>
          <th>Market Value</th>
          <th>Day's Gain</th>
          <th>Gain</th>
          <th>(%)</th>
          <th>Overall Gain</th>
          <th>(%)</th>
        </tr>
      </thead>
      <tbody>
      {{#each currentHoldings}}
        {{#if visible}}
        <tr>
          <td>{{symbol}}</td>
          <td>{{formatCurrency lastTradePriceOnly}}</td>
          <td>{{formatCurrency change}} ({{formatPercent changePercent}})</td>
          <td>{{shares}}</td>
          <td>{{formatCurrency costBasis}}</td>
          <td>{{formatCurrency marketValue}}</td>
          <td>{{formatCurrency daysGain}}</td>
          <td>{{formatCurrency gain}}</td>
          <td>{{formatPercent  gainPercent}}</td>
          <td>{{formatCurrency overallGain}}</td>
          <td>{{formatPercent  overallGainPercent}}</td>
        </tr>
        {{/if}}
      {{/each}}

      {{#with total}}
        <tr class="total">
          <td>Total</td>
          <td></td>
          <td></td>
          <td></td>
          <td>{{formatCurrency costBasis}}</td>
          <td>{{formatCurrency marketValue}}</td>
          <td>{{formatCurrency daysGain}}</td>
          <td>{{formatCurrency gain}}</td>
          <td>{{formatPercent  gainPercent}}</td>
          <td>{{formatCurrency overallGain}}</td>
          <td>{{formatPercent  overallGainPercent}}</td>
        </tr>
      {{/with}}

      </tbody>
    </table>
    {{else}}
    <p>You have no holdings at the moment.</p>
    {{/if}}
    {{> transaction_tools}}
  </div>
</template>