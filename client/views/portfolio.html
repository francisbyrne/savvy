<template name="portfolio">
  <div class="portfolio">
    <h2>Portfolio</h2>
    <label for="show-closed">
      Show Closed Positions
      <input id="show-closed" type="checkbox" checked="{{showClosed}}" />
    </label>
    {{#if currentHoldings}}
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Symbol</th>
          <th>Price</th>
          <th>Change</th>
          <th>Shares</th>
          <th>Cost Basis</th>
          <th>Market Value</th>
          <th>Gain</th>
          <th>Gain (%)</th>
          <th>Day's Gain</th>
          <th>Overall Gain</th>
        </tr>
      </thead>
      <tbody>
      {{#each currentHoldings}}
        {{#if visible}}
        <tr>
          <td>{{name}}</td>
          <td>{{symbol}}</td>
          <td>{{formatCurrency lastTradePriceOnly}}</td>
          <td>{{formatCurrency change}}</td>
          <td>{{#if shares}}{{shares}}{{else}}0 (Closed){{/if}}</td>
          <td>{{formatCurrency costBasis}}</td>
          <td>{{formatCurrency marketValue}}</td>
          <td>{{formatCurrency gain}}</td>
          <td>{{formatPercent gainPercent}}</td>
          <td>{{formatCurrency daysGain}}</td>
          <td>{{formatPercent overallGain}}</td>
        </tr>
        {{/if}}
      {{/each}}

      {{#with total}}
        <tr>
          <td>Total</td>
          <td></td>
          <td></td>
          <td>{{change}}</td>
          <td></td>
          <td>{{costBasis}}</td>
          <td>{{marketValue}}</td>
          <td>{{gain}}</td>
          <td>{{gainPercent}}</td>
          <td>{{daysGain}}</td>
        </tr>
        {{/with}}

      </tbody>
    </table>
    {{else}}
    <p>You have no holdings at the moment.</p>
    {{/if}}
    {{> transaction_tools}}
  </div>
</template>